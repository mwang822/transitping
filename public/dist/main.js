(()=>{document.getElementById("location");let t=document.getElementById("transitResponse");function e(t,e){const n="https://dev.virtualearth.net/REST/v1/Routes/walking",o=new URLSearchParams;return o.append("wayPoint.1",`${t.lat},${t.lon}`),o.append("wayPoint.2",`${e.lat},${e.lon}`),o.append("ra","routeSummariesOnly"),o.append("key","AgABNf69TNOhfktEdaM_VXgsALbx4Rt4ih00qLabWszbrukFBCOS_LSDD1iZRWar"),console.log(`${n}?${o.toString()}`),fetch(`${n}?${o.toString()}`)}console.log("AgABNf69TNOhfktEdaM_VXgsALbx4Rt4ih00qLabWszbrukFBCOS_LSDD1iZRWar"),new Promise((function(t,e){navigator.geolocation.getCurrentPosition(t,e)})).then((t=>{userLat=t.coords.latitude,userLon=t.coords.longitude;let{latitude:e,longitude:n}=t.coords;return fetch(`https://transitping-mtapi.onrender.com/by-location?lat=${e}&lon=${n}`)})).then((t=>t.json())).then((n=>{!function(n){let o="";for(let t=0;t<3;t++){let a,r,i={},l={};a=n[t].N,r=n[t].S,time=e({lat:userLat,lon:userLon},{lat:n[t].location[0],lon:n[t].location[1]}).then((t=>t.json())).then((e=>{console.log(e),time=Math.round(e.resourceSets[0].resources[0].travelDuration/60),document.getElementsByClassName("station-name")[t].innerHTML+=`&nbsp;&nbsp;&nbsp;&nbsp;&#128694;${time}mins`})),o+=`<div class="station ${n[t].name.toLowerCase().replace(/\s+/g,"-")}">`,o+=`<p class="station-name">${n[t].name}</p>`,o+='<div class="direction north">',o+="<p>Northbound Trains</p>";for(let e=0;e<4;e++){let o=Math.round((new Date(a[e].time)-Date.now())/6e4);n[t].N[e].route in i?i[n[t].N[e].route].push(o):i[n[t].N[e].route]=[o]}for(var s in i){let t="";for(let e=0;e<i[s].length;e++)t+=`${i[s][e]}, `;t=t.substring(0,t.length-2),o+=`<p>Route: ${s}&nbsp;&nbsp;&nbsp;ETA: ${t} mins</p>`}o+="</div>",o+='<div class="direction south">',o+="<p>Southbound Trains</p>";for(let t=0;t<4;t++){let e=Math.round((new Date(r[t].time)-Date.now())/6e4);r[t].route in l?l[r[t].route].push(e):l[r[t].route]=[e]}for(var s in l){let t="";for(let e=0;e<l[s].length;e++)t+=`${l[s][e]}, `;t=t.substring(0,t.length-2),o+=`<p>Route: ${s}&nbsp;&nbsp;&nbsp;ETA: ${t} mins</p>`}o+="</div>",o+="</div>"}t.innerHTML=`<div class="stations">${o}</div>`}(n.data)})).catch((t=>console.log(t)))})();